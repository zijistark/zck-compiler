Import('*')

# TODO: Add a custom builder that exists on _both_ Windows and Linux/cygwin for
# env.CXXFile-like functionality (that is, generate scanner.cc from scanner.ll,
# namely-- but on pure Windows too). In the meantime, since our lexer rarely
# updates and is indeed a code generator, we regenerate it manually instead of here.

sources = Glob('zck/*.cc')
sources.append('zck/lexer/Lexer.cpp')
env.Command("zck/lexer/Lexer.cpp", "", "cd zck && make lexer/Lexer.cpp")
env.StaticLibrary('zck', sources)
env.Program('ast2dot', sources + ['ast2dot.cc'])

